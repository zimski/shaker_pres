<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahé <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">



  <slide class="title-slide segue nobackground">
    <aside class="gdbar"><img src="images/logo_300.png"></aside>
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Sommaire</h2>
    </hgroup>
    <article>
      <ul>
        <li>L’administration système </li>
        <li>L'automatisation </li>
        <li>Cloud privé </li>
        <li>SALTSTACK </li>
        <li>Containers vs VM </li>
        <li>Shaker</li>
        <li>OpenStack</li>
        <li>Let's automate ! </li>
        <li>Démonstration</li>
        </ul>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2> L’administration système </h2>
    </hgroup>
    <article>
      <ul>
        <li>Mettre en place et configurer des services </li>
      </ul>
    <img src="images/admin_1.jpg" class="reflect" alt="Description" title="Description">

    </article>
  </slide>
  <slide>
    <hgroup>
      <h2> L'automatisation, notre sauveur ! </h2>
      <h3> ..... mais on en veut plus ! </h3>
    </hgroup>
    <article>
      <ul>
        <li>Des recettes à tout faire </li>
        <li>Une maintenance à faible coût et évolutif </li>
        <li>Une IHM, ça aide !<li>
        <li>Rapide et sûr</li>

      </ul>
    </article>
  </slide>
<slide>
    <hgroup>
      <h2>Cloud privé</h2>
      <h3>IRCAD</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/plan_automate.png" class="reflect" alt="Description" title="Description" style="position:relative;top:-50px">
    </article>
  </slide>
<slide>

    <hgroup>
      <h2> SALTSTACK </h2>
    </hgroup>
    <article>
      <ul>
        <li></li>
        <li>Une approche plus simple que ses concurrents</li>
        <li>Complètement gratuit et open source</li>
        <li>Communauté active et agréable</li>
      </ul>
  <img src="images/saltstack.png" class="reflect" alt="Description" style="width:300px;height:180px" title="Description">
    </article>
  </slide>
<slide>
    <hgroup>
      <h2>SALTSTACK</h2>
      <h3> Technologies</h3>
    </hgroup>
    <article class="flexbox">
       <ul>
        <li>Python</li>
        <li>0MQ</li>
        <li>M2Crypto</li>
        <li>MessagePack</li>
      </ul>
  <img src="images/python.png" class="reflect" alt="Description" style="width:300px;height:100px" title="Description">
  <img src="images/0mq.gif" class="reflect" alt="Description" style="width:300px;height:100px" title="Description">
    </article>
  </slide>

<slide>
    <hgroup>
      <h2>SALTSTACK</h2>
      <h3>Et ses concurrents...</h3>
    </hgroup>
    <article class="flexbox vcenter ">
<table style="margin-bottom:200px">
        <tr>
          <th></th><th>Saltstack</th><th>Puppet</th><th>Chef</th><th>cfEngine</th>
        </tr>
        <tr>
          <td>Fichier de conf</td><td class="highlight">YAML</td><td >Ruby*</td><td>Ruby</td><td>cf lang</td>
        </tr>
        <tr>
          <td>Monté en charge</td><td class="highlight">Natif</td><td>non</td><td>non</td><td  class="highlight">Natif</td>
        </tr>
        <tr>
          <td>Langage</td><td  class="highlight" >Python</td><td>Ruby</td><td>Ruby</td><td>C</td>
        </tr>
        <tr>
          <td>Simplicité</td><td  class="highlight">Très</td><td>moyen</td><td>Ruby guru</td><td>:'(</td>
        </tr>
        <tr>
          <td>Prix</td><td  class="highlight">Gratuit</td><td>Enterprise</td><td>Enterprise</td><td>Enterprise</td>
        </tr>
      </table>
    </article>
  </slide>

 <slide>
    <hgroup>
      <h2>SALTSTACK</h2>
      <h3>Pour vos serveurs mais aussi pour le reste !</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/saltstack infra.png" class="reflect" alt="Description" title="Description" style="margin-bottom:150px">
    </article>
  </slide>
<slide>
    <hgroup>
      <h2>SALTSTACK</h2>
      <h3>Les minions et les grains</h3>
    </hgroup>
    <article class="flexbox vcenter ">
    <pre class="prettyprint" data-lang="bash">
root@Salt-Master:~/sgod# salt 'nahla' grains.items
nahla:
  biosreleasedate: 01/01/2011
  biosversion: Bochs
  cpu_model: Common KVM processor
  cpuarch: x86_64
  defaultencoding: UTF-8
  defaultlanguage: en_US
  domain: 
  fqdn: nahla
  fqdn_ip4:
      127.0.1.1
...
    </pre>
    </article>
</slide>

<slide>
    <hgroup>
      <h2>SALTSTACK</h2>
      <h3>Les recettes</h3>
    </hgroup>
    <article class="flexbox vcenter ">
    <pre class="prettyprint" data-lang="apache.sls">
apache:
  pkg:
    - <b>installed</b>
  service:
    - <b>running</b>
    - watch:
      - pkg: apache
      - file: /etc/httpd/conf/httpd.conf
      - user: apache
  
<b>/etc/httpd/conf/httpd.conf:</b>
  file.managed:
    - source: salt://apache/httpd.conf
    - user: root
    - group: root
    - mode: 644
   </pre>
    </article>
</slide>

<slide>
    <hgroup>
      <h2>SALTSTACK</h2>
      <h3>Les recettes épicées aux grains</h3>
    </hgroup>
    <article class="flexbox vcenter ">
    <pre class="prettyprint" data-lang="apache.sls">
apache:
  pkg.installed:
  <b>{% if grains['os'] == 'RedHat'%}</b>
    - name: httpd
  <b>{% elif grains['os'] == 'Ubuntu' %}</b>
    - name: apache2
  {% endif %}
  </pre>
    </article>
</slide>

<slide>
    <hgroup>
      <h2>SALTSTACK</h2>
      <h3>Mécanisme</h3>
    </hgroup>
    <article class="flexbox vcenter ">
   <img src="images/saltstack_grains.png" class="reflect" alt="Description" title="Description" style="margin-bottom:150px">
      </article>
</slide>



<slide>
    <hgroup>
      <h2>SALTSTACK</h2>
      <h3>Pillars... Top Secret !</h3>
    </hgroup>
    <article class="flexbox vcenter ">
    <pre class="prettyprint" data-lang="pillar.sls">
conf_data:
  root_pass: "securePassw0rd!!%"
  root_email: contact@boite.fr
  Blabla: foufou
 </pre>

<pre class="prettyprint" data-lang="conf_contact.sls">
Config:
 File.replace:
  - name: /etc/config
  - pattern: "contact :*"
  - replace: "contact : <b>{% pillar['conf_data']['root_email'] %}</b>"
</pre>
    </article>
</slide>

<slide>
    <hgroup>
      <h2>SALTSTACK</h2>
      <h3>Mécanisme</h3>
    </hgroup>
    <article class="flexbox vcenter ">
   <img src="images/saltstack_grains_pillars.png" class="reflect" alt="Description" title="Description" style="margin-bottom:150px">
      </article>
</slide>
<slide class="fill nobackground" style="background-image: url(images/ct.jpg)">
    <hgroup>
      <h2>Container & VM</h2>
 </hgroup>
    <footer class="source black"><b>source http://maritime-connector.com/ship/agnes-rickmers-9289972/</b></footer>
</slide>
<slide>
    <hgroup>
      <h2>Container & VM</h2>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/ct_vm.jpg" class="reflect" alt="Description" title="Description" style="margin-bottom:100px">
    </article>
    <footer class="source black"><b>source http://blog.ippon.fr/2014/04/14/docker-presentation-part-1/</b></footer>

  </slide>


<slide>
    <hgroup>
      <h2>Container & VM</h2>
      <h3>Performance réseaux</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/vmvsct_net.png" class="reflect" alt="Description" title="Description" style="margin-bottom:100px">
    </article>
    <footer class="source black"><b>source https://openvz.org/Performance </b></footer>
  </slide>

<slide>
    <hgroup>
      <h2>Container & VM  </h2>
      <h3>Temps de latence</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/vmvsct_response.png" class="reflect" alt="Description" title="Description" style="margin-bottom:100px">
    </article>
    <footer class="source black"><b>source https://openvz.org/Performance </b></footer>
  </slide>
<slide>
    <hgroup>
      <h2>Container & VM  </h2>
      <h3>Un fan de Container...mais !</h3>
    </hgroup>
    <article class="flexbox ">
    <ul>
        <li>CT ne replace pas une VM</li>
        <li>Un CT, c'est limité</li>
        <li>Déploiement de service</li>
        <li>LXC(Docker) ou OpenVZ</li>
      </ul></article>
    

  </slide>



<slide>
    <hgroup>
      <h2>Shaker</h2>
      <h3>Un bon ami à SALTSTACK</h3>
    </hgroup>
    <article class="flexbox">
        <ul>
        <li>Open source</li>
        <li>Un couteau suisse</li>
        <li>IHM</li>
        <li>Modulaire et évolutif</li>
        <li>Orchestrez votre cloud privé différemment</li>
      </ul>
        <img src="images/suisse.png" class="reflect" alt="Description" title="Description">
    </article>
  </slide>







<slide>
    <hgroup>
      <h2>Shaker</h2>
      <h3>Et il aime le ssh</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/shaker1.png" class="reflect" alt="Description" title="Description"style="margin-bottom:150px">
    </article>
  </slide>


<slide>
    <hgroup>
      <h2>Shaker</h2>
      <h3>Le coeur</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/shaker2.png" class="reflect" alt="Description" title="Description"style="margin-bottom:150px">
    </article>
  </slide>




















<slide>
    <hgroup>
      <h2>Shaker</h2>
      <h3>La web application</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/shaker3.png" class="reflect" alt="Description" title="Description"style="margin-bottom:150px">
    </article>
  </slide>

<slide class="fill nobackground" style="background-image: url(images/shaker_list.png); background-size: 100% 65%">
    <hgroup>
    </hgroup>
</slide>
<slide class="fill nobackground" style="background-image: url(images/shaker_make.png); background-size: 100% 75%">
    <hgroup>
    </hgroup>
</slide>
<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Fichier d'environnement</h3>
    </hgroup>
    <article>
    <ul> <li>Il représente nos variables dont on aura besoin</li> <li>Le fichier de sortie doit être au format YAML (moteur de template mako) </li></ul>
      <pre class="prettyprint" data-lang="python">
<%
  import redis
  r = redis.StrictRedis()
  data = r.hgetall('DB:Manage_vm:'+argv[0])
%>
script:
    host: ${data['ip']}
    user: root
    password: ${data['pass']}
</pre>
    </article>

</slide>
<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Fichier Script</h3>
    </hgroup>
    <article>
    <ul> <li>Il représente nos instructions à exécuter</li> <li>Le fichier est dabord mis en forme (template) avant d'être exécuté (Mako) </li></ul>
      <pre class="prettyprint" data-lang="bash">
apt-get update
apt-get install curl
<b>echo "${env['global_var']['hostname']}" > /etc/hostname</b>
/etc/init.d/hostname start
hostname ${env['global_var']['hostname']}
<b>curl -k -L http://bootstrap.saltstack.org | sh</b>
hostname
<b>$$ send_file.send file_conf_salt_minion</b>
## send hosts file 
$$ send_file.send file_hosts
/etc/init.d/salt-minion restart
echo "helloo"
</pre>
    </article>

</slide>
<slide class="fill nobackground" style="background-image: url(images/shaker_edit.png); background-size: 100% 75%">
    <hgroup>
    </hgroup>
</slide>


<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Les modules</h3>
    </hgroup>
    <article>
    <ul> <li>Un outil puissant et facile à implémenter</li></ul>
      <pre class="prettyprint" data-lang="bash (script)">
hostname ${env['global_var']['hostname']}
## send hosts file 
<b>$$ send_file.send file_hosts</b>
</pre>
      <pre class="prettyprint" data-lang="yaml (ENV)">
<b>file_hosts:
    host:
        ip: ${data['ip']}
        username: root
        password: ${data['pass']}
    template:
        file_name: /root/sgod/config_files/hosts
        dest_path: "/etc/hosts"
        machine_name: ${data['host']}</b>
</pre>
 
    </article>

</slide>
<slide>
    <hgroup>
      <h2> Le langage Shaker</h2>
      <h3> Problématique</h3>
    </hgroup>
    <p>Installation d'un paquet intéractif</p>
    <article class="flexbox vcenter ">
        <img src="images/shaker_install_1.png" class="reflect" alt="Description" title="Description" style="margin-bottom:250px">
        <img src="images/shaker_install_2.png" class="reflect" alt="Description" title="Description" style="margin-bottom:250px">
    </article>
  </slide>

<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Les modules</h3>
      <h4>Les modules "variable" et "IF"</h4>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="bash (script)">
dcm4chee_exist=`dpkg --list | grep dcm4chee | wc -l`
$$ sk_console.get DCM
## test if dcm4chee is installed
$$ rbox.cmd_if COND
</pre>
      <pre class="prettyprint" data-lang="yaml (ENV)">
DCM:
    - dcm4chee_exist
COND:
    if: dcm4chee_exist == 0
    then: |
        $$ sk_ssh.expect CMD_dpkg
    else: |
        echo "DCM4CHEE INSTALLED"
        /etc/rc.local stop
</pre>
 
    </article>

</slide>

<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Les modules</h3>
      <h4>Le module expect</h4>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="yaml (ENV)">
COND:
    if : dcm4chee_exist == 0
    then: |
        <b>$$ sk_ssh.expect CMD_dpkg</b>
    else: |
        echo "DCM4CHEE INSTALLED"
        /etc/rc.local stop
        sleep 10
    
<b>CMD_dpkg:
    cmd : dpkg -i /tmp/dcm4chee-mysql.deb
    expect:
        "Enter password:" : "root"</b> 

</pre>


       
    </article>

</slide>
<slide>
    <hgroup>
      <h2> Shaker </h2>
      <h3> Et plus encore</h3> 
    </hgroup>
    <article>
      <ul>
        <li>Lancement de taches parallèles ou séquentielles</li>
        <li> Web app:</li>
        <ul>
            <li>Flux en temps réel affiché dans la console</li>
            <li>Éditeur integré du code Shaker</li>
            <li>Exécution et débogage du code  </li>
            <li>Moteur de création de plugin intégré</li>
        </ul>
      </ul>
    </article>
  </slide>
<slide>
    <hgroup>
      <h2> Shaker </h2>
      <h3> Et demain ...</h3>
    </hgroup>
    <article>
      <ul>
        <li>Développement d'un dépôt public de plugins/modules (partage et échange)</li>
        <li>Mode multi-serveurs</li>
        <li>Intégration d'autre mode de communication ZERO-MQ.</li>
        <li>Support de clients Saltstack, Puppet, Chef...</li>
        <li>Intégration avec des modules de monitoring </li> 
        <li><b>Prise de décision automatique (administration autonome)</b>  </li>
        <li>Toute idée est la bienvenue</li>
      </ul>
    </article>
  </slide>

<slide>
    <hgroup>
    <h2>OpenStack</h2>
      <h3>Et Git aussi</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/salt_shaker_openstack.png" class="reflect" alt="Description" title="Description"style="margin-bottom:150px">
    </article>
  </slide>


<slide>
    <hgroup>
      <h2>Automation</h2>
      <h3>Scénario 1</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/automate1.png" class="reflect" alt="Description" title="Description"style="margin-bottom:150px">
    </article>
  </slide>



<slide>
    <hgroup>
      <h2>Automation</h2>
      <h3>Scénario 2</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/automate2.png" class="reflect" alt="Description" title="Description"style="margin-bottom:150px">
    </article>
  </slide>








<slide class="fill nobackground" style="background-image: url(images/shaker_logo.jpg)">
    <hgroup>
    </hgroup>
    <footer class="source black"><b>github.com/zimski/shaker</b></footer>
</slide>
<slide class="fill nobackground" style="background-image: url(images/hireme.jpg)">
    <hgroup>
</hgroup>
    <footer class="source black" style="font-size:40px; color:white !important" ><b>CHADDA . CHAKIB @ GMAIL . COM</b></footer>
</slide>
  <slide hidden>
    Hidden slides are left out of the presentation.
  </slide>
  <slide class="backdrop"></slide>

</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
