<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahé <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">



  <slide class="title-slide segue nobackground">
    <aside class="gdbar"><img src="images/logo_300.png"></aside>
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Sommaire</h2>
    </hgroup>
    <article>
      <ul>
        <li>L’administration système </li>
        <li>Besoin ? Solution : l'automatisation </li>
        <li>Le projet Shaker </li>
        <ul>
        <li>Le langage Shaker </li>
        <li>Web-app Shaker</li>
        <li>Shaker et ses modules </li>
        <li>Shaker demain ! </li>
        <li>Démonstration</li>
        </ul>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2> L’administration système </h2>
    </hgroup>
    <article>
      <ul>
        <li>Mettre en place et configurer des services </li>
        <li>Cela prend du temps, nécéssite des compétences <li>
        <li>Des retards si le spécialiste est absent </li>
        <li>Rébarbatif !! </li>
      </ul>
    </article>
  </slide>
  <slide>
    <hgroup>
      <h2> L'automatisation, notre sauveur ! </h2>
      <h3> ..... mais on en veut plus ! </h3>
    </hgroup>
    <article>
      <ul>
        <li>Une sorte de recette réservée à une tache précise </li>
        <li>Une IHM intuitive <li>
        <li>Un langage puissant, facile et modulable</li>
        <li>Aucun prérequis sauf le bash</li>
      </ul>
    </article>
  </slide>
<slide>
    <hgroup>
      <h2> Shaker </h2>
    </hgroup>
    <article>
      <ul>
        <li>Une approche innovante!</li>
        <li>Un langage modulaire et puissant</li>
        <li>Une webapp opérationnelle et complète</li>
        <li>S'adapte et évolue avec les besoins rapidement</li>
        <li>Make it easy ! </li>
      </ul>
    </article>
  </slide>
<slide>
    <hgroup>
      <h2> Shaker </h2>
      <h3> il aime le ssh !</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/shaker1.png" class="reflect" alt="Description" title="Description">
    </article>
  </slide>
<slide>
    <hgroup>
      <h2> Shaker </h2>
      <h3> le coeur !</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/shaker2.png" class="reflect" alt="Description" title="Description">
    </article>
  </slide>
<slide>
    <hgroup>
      <h2> Shaker WEB APP</h2>
      <h3> Une interface pour tout le monde</h3>
    </hgroup>
    <article class="flexbox vcenter ">
        <img src="images/shaker3.png" class="reflect" alt="Description" title="Description">
    </article>
  </slide>

<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Fichier d'environnement</h3>
    </hgroup>
    <article>
    <ul> <li>Il représente nos variables dont on aura besoin</li> <li>Le fichier de sortie doit être au format YAML (moteur de temlate mako) </li></ul>
      <pre class="prettyprint" data-lang="python">
<%
  import redis
  r = redis.StrictRedis()
  data = r.hgetall('DB:Manage_vm:'+argv[0])
%>
script:
    host  : ${data['ip']}
    user  : root
    password  : ${data['pass']}
</pre>
    </article>

</slide>
<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Fichier Script</h3>
    </hgroup>
    <article>
    <ul> <li>Il représente nos instructions à exécuter</li> <li>Le fichier est dabord mis en forme (template) avant d'être exécuté (Mako) </li></ul>
      <pre class="prettyprint" data-lang="bash">
apt-get update
apt-get install curl
<b>echo "${env['global_var']['hostname']}" > /etc/hostname</b>
/etc/init.d/hostname start
hostname ${env['global_var']['hostname']}
<b>curl -k -L http://bootstrap.saltstack.org | sh</b>
hostname
<b>$$ send_file.send file_conf_salt_minion</b>
## send hosts file 
$$ send_file.send file_hosts
/etc/init.d/salt-minion restart
echo "helloo"
</pre>
    </article>

</slide>
<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Les modules</h3>
    </hgroup>
    <article>
    <ul> <li>Un outil puissant et facile à implémenter</li></ul>
      <pre class="prettyprint" data-lang="bash (script)">
hostname ${env['global_var']['hostname']}
## send hosts file 
<b>$$ send_file.send file_hosts</b>
</pre>
      <pre class="prettyprint" data-lang="yaml (ENV)">
<b>file_hosts:
    host:
        ip      : ${data['ip']}
        username    : root
        password: ${data['pass']}
    template:
        file_name  : /root/sgod/config_files/hosts
        dest_path  : "/etc/hosts"
        machine_name: ${data['host']}</b>
</pre>
 
    </article>

</slide>

<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Les modules</h3>
      <h4>Les modules variable et IF</h4>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="bash (script)">
dcm4chee_exist=`dpkg --list | grep dcm4chee | wc -l`
$$ sk_console.get DCM
## test if dcm4chee is installed
$$ rbox.cmd_if COND
</pre>
      <pre class="prettyprint" data-lang="yaml (ENV)">
DCM:
    - dcm4chee_exist
COND:
    if : dcm4chee_exist == 0
    then: |
        $$ sk_ssh.expect CMD_dpkg
    else: |
        echo "DCM4CHEE INSTALLED"
        /etc/rc.local stop
</pre>
 
    </article>

</slide>

<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Les modules</h3>
      <h4>Le module expect</h4>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="yaml (ENV)">
COND:
    if : dcm4chee_exist == 0
    then: |
        <b>$$ sk_ssh.expect CMD_dpkg</b>
    else: |
        echo "DCM4CHEE INSTALLED"
        /etc/rc.local stop
        sleep 10
    
<b>CMD_dpkg:
    cmd : dpkg -i /tmp/dcm4chee-mysql.deb
    expect:
        "Enter password:" : "root"</b> 

</pre>


       
    </article>

</slide>
<slide>
    <hgroup>
      <h2>Le langage Shaker</h2>
      <h3>Les modules</h3>
      <h4>Configuration de switch/routeur</h4>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="bash (script)">
<b>$$ netDevice.pull CONF</b>
</pre>
      <pre class="prettyprint" data-lang="yaml (ENV)">
CONF:
    user: cisco
    password: cisco
    hostname: 192.168.0.100
    conf: |
        <b>conf t
        interface Gi1/0/24
        description "modifie par Shaker"
        no shutdown</b>
</pre>
 
    </article>

</slide>

<slide>
    <hgroup>
      <h2> Shaker </h2>
      <h3> et plus encore</h3> 
    </hgroup>
    <article>
      <ul>
        <li>Lancement de taches parallèles ou séquentielles (au choix)</li>
        <li>Flux en temps réel affiché dans la console (web app)</li>
        <li>Éditeur integré du code Shaker (web app)</li>
        <li>Exécution et débogage du code (web app) </li>
        <li>Moteur de création de plugin intégré (web app)</li>
      </ul>
    </article>
  </slide>
<slide>
    <hgroup>
      <h2> Shaker </h2>
      <h3> et demain ...</h3>
    </hgroup>
    <article>
      <ul>
        <li>Développement d'un dépôt public de plugins/modules (partage et échange)</li>
        <li>Mode multi-serveurs</li>
        <li>Intégration avec des modules de monitoring </li> 
        <li><b>Prise de décision automatique (administration autonome)</b>  </li>
        <li>Toute idée est la bienvenue</li>
      </ul>
    </article>
  </slide>
<slide class="fill nobackground" style="background-image: url(images/shaker_logo.jpg)">
    <hgroup>
    </hgroup>
    <footer class="source black"><b>github.com/zimski/shaker</b></footer>
</slide>
  <slide hidden>
    Hidden slides are left out of the presentation.
  </slide>
  <slide class="backdrop"></slide>

</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
